<?xml version="1.0" encoding="UTF-8"?>
<testsuites name="jest tests" tests="28" failures="5" time="9.193">
  <testsuite name="Tests de ClientesTokenRedis" errors="0" failures="0" skipped="0" timestamp="2025-03-26T22:06:51" time="4.732" tests="5">
    <testcase classname="Tests de ClientesTokenRedis setClienteToken debería guardar un cliente en Redis" name="Tests de ClientesTokenRedis setClienteToken debería guardar un cliente en Redis" time="0.001">
    </testcase>
    <testcase classname="Tests de ClientesTokenRedis getIdCliente debería obtener el valor correctamente desde Redis" name="Tests de ClientesTokenRedis getIdCliente debería obtener el valor correctamente desde Redis" time="0.037">
    </testcase>
    <testcase classname="Tests de ClientesTokenRedis getIdCliente debería retornar null si la clave no existe en Redis" name="Tests de ClientesTokenRedis getIdCliente debería retornar null si la clave no existe en Redis" time="0.001">
    </testcase>
    <testcase classname="Tests de ClientesTokenRedis getIdCliente debería manejar errores y retornar null" name="Tests de ClientesTokenRedis getIdCliente debería manejar errores y retornar null" time="0.003">
    </testcase>
    <testcase classname="Tests de ClientesTokenRedis flushAll debería limpiar toda la data de Redis" name="Tests de ClientesTokenRedis flushAll debería limpiar toda la data de Redis" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Test del Archivo HealtCheckDao" errors="0" failures="0" skipped="0" timestamp="2025-03-26T22:06:50" time="4.833" tests="4">
    <testcase classname="Test del Archivo HealtCheckDao healtCheckDB debería llamar a healtCheckDB correctamente" name="Test del Archivo HealtCheckDao healtCheckDB debería llamar a healtCheckDB correctamente" time="0.045">
    </testcase>
    <testcase classname="Test del Archivo HealtCheckDao healtCheckDB debería arrojar un error si la base de datos falla" name="Test del Archivo HealtCheckDao healtCheckDB debería arrojar un error si la base de datos falla" time="0">
    </testcase>
    <testcase classname="Test del Archivo HealtCheckDao healtCheckTabla debería verificar la disponibilidad de una tabla correctamente" name="Test del Archivo HealtCheckDao healtCheckTabla debería verificar la disponibilidad de una tabla correctamente" time="0">
    </testcase>
    <testcase classname="Test del Archivo HealtCheckDao healtCheckTabla debería arrojar un error si la tabla falla" name="Test del Archivo HealtCheckDao healtCheckTabla debería arrojar un error si la tabla falla" time="0">
    </testcase>
  </testsuite>
  <testsuite name="Tests de ClienteTokenDAO" errors="0" failures="0" skipped="0" timestamp="2025-03-26T22:06:51" time="5.044" tests="5">
    <testcase classname="Tests de ClienteTokenDAO crearCliente debería crear un cliente correctamente" name="Tests de ClienteTokenDAO crearCliente debería crear un cliente correctamente" time="0.003">
    </testcase>
    <testcase classname="Tests de ClienteTokenDAO crearCliente debería manejar errores al crear un cliente" name="Tests de ClienteTokenDAO crearCliente debería manejar errores al crear un cliente" time="0.001">
    </testcase>
    <testcase classname="Tests de ClienteTokenDAO validarIdCliente debería validar un cliente correctamente" name="Tests de ClienteTokenDAO validarIdCliente debería validar un cliente correctamente" time="0">
    </testcase>
    <testcase classname="Tests de ClienteTokenDAO validarIdCliente debería retornar null si el cliente no existe" name="Tests de ClienteTokenDAO validarIdCliente debería retornar null si el cliente no existe" time="0">
    </testcase>
    <testcase classname="Tests de ClienteTokenDAO validarIdCliente debería manejar errores al validar un cliente" name="Tests de ClienteTokenDAO validarIdCliente debería manejar errores al validar un cliente" time="0">
    </testcase>
  </testsuite>
  <testsuite name="Test del Archivo HealtCheckUseCase" errors="0" failures="0" skipped="0" timestamp="2025-03-26T22:06:55" time="0.35" tests="1">
    <testcase classname="Test del Archivo HealtCheckUseCase healtCheckDB debería llamar a healtCheckDB correctamente" name="Test del Archivo HealtCheckUseCase healtCheckDB debería llamar a healtCheckDB correctamente" time="0">
    </testcase>
  </testsuite>
  <testsuite name="ValidarIdClienteUseCase" errors="0" failures="1" skipped="0" timestamp="2025-03-26T22:06:51" time="5.159" tests="3">
    <testcase classname="ValidarIdClienteUseCase debería retornar el cliente desde Redis si existe" name="ValidarIdClienteUseCase debería retornar el cliente desde Redis si existe" time="0.001">
    </testcase>
    <testcase classname="ValidarIdClienteUseCase debería buscar en el repositorio si el cliente no está en Redis" name="ValidarIdClienteUseCase debería buscar en el repositorio si el cliente no está en Redis" time="0.008">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

- Expected
+ Received

  &quot;auth123&quot;,
  Object {
    &quot;activo&quot;: true,
-   &quot;apikey&quot;: &quot;api-key&quot;,
    &quot;tiempo_expiracion&quot;: &quot;2h&quot;,
  },

Number of calls: 1
    at Object.&lt;anonymous&gt; (/Users/usuario/Documents/Coordinadora/examen Senior/cm-usuarios-auth/test/modules/ClienteToken/usecase/ValidarIdClienteUseCase.test.ts:57:43)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="ValidarIdClienteUseCase debería lanzar un error si el cliente no se encuentra" name="ValidarIdClienteUseCase debería lanzar un error si el cliente no se encuentra" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Test del Archivo HealtCheckController" errors="0" failures="0" skipped="0" timestamp="2025-03-26T22:06:55" time="0.866" tests="2">
    <testcase classname="Test del Archivo HealtCheckController healtCheck debería retornar una respuesta 200 OK con el mensaje &quot;ok&quot;" name="Test del Archivo HealtCheckController healtCheck debería retornar una respuesta 200 OK con el mensaje &quot;ok&quot;" time="0.001">
    </testcase>
    <testcase classname="Test del Archivo HealtCheckController healtCheckDB debería retornar una respuesta 200 OK con el mensaje &quot;ok&quot; después de una verificación exitosa de la base de datos" name="Test del Archivo HealtCheckController healtCheckDB debería retornar una respuesta 200 OK con el mensaje &quot;ok&quot; después de una verificación exitosa de la base de datos" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="ClienteTokenRouter" errors="0" failures="4" skipped="0" timestamp="2025-03-26T22:06:51" time="5.283" tests="5">
    <testcase classname="ClienteTokenRouter generarToken debería generar un token correctamente" name="ClienteTokenRouter generarToken debería generar un token correctamente" time="0.003">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: {&quot;clave&quot;: &quot;1234&quot;, &quot;cliente&quot;: &quot;test&quot;}
Received: undefined

Number of calls: 1
    at Object.&lt;anonymous&gt; (/Users/usuario/Documents/Coordinadora/examen Senior/cm-usuarios-auth/test/modules/ClienteToken/controllers/ClienteTokenRouter.test.ts:61:49)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="ClienteTokenRouter generarToken debería manejar error al generar un token" name="ClienteTokenRouter generarToken debería manejar error al generar un token" time="0.001">
      <failure>Error: expect(received).toEqual(expected) // deep equality

Expected: {&quot;autorizado&quot;: false, &quot;data&quot;: [], &quot;error&quot;: {&quot;autorizado&quot;: false, &quot;code&quot;: &quot;INTERNAL_ERROR&quot;, &quot;message&quot;: &quot;Error al generar el token&quot;, &quot;stack&quot;: undefined}, &quot;isError&quot;: true, &quot;message&quot;: &quot;Ha ocurrido un error&quot;, &quot;statusCode&quot;: 500}
Received: &quot;Error al generar el token&quot;
    at Object.&lt;anonymous&gt; (/Users/usuario/Documents/Coordinadora/examen Senior/cm-usuarios-auth/test/modules/ClienteToken/controllers/ClienteTokenRouter.test.ts:88:42)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="ClienteTokenRouter validarToken debería validar un token correctamente" name="ClienteTokenRouter validarToken debería validar un token correctamente" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;authorization&apos;)
    at ClienteTokenRouter.validarToken (/Users/usuario/Documents/Coordinadora/examen Senior/cm-usuarios-auth/src/modules/ClienteToken/controllers/ClienteTokenRouter.ts:50:31)
    at Object.&lt;anonymous&gt; (/Users/usuario/Documents/Coordinadora/examen Senior/cm-usuarios-auth/test/modules/ClienteToken/controllers/ClienteTokenRouter.test.ts:98:38)
    at Promise.then.completed (/Users/usuario/Documents/Coordinadora/examen Senior/cm-usuarios-auth/node_modules/jest-circus/build/utils.js:391:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/usuario/Documents/Coordinadora/examen Senior/cm-usuarios-auth/node_modules/jest-circus/build/utils.js:316:10)
    at _callCircusTest (/Users/usuario/Documents/Coordinadora/examen Senior/cm-usuarios-auth/node_modules/jest-circus/build/run.js:218:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/usuario/Documents/Coordinadora/examen Senior/cm-usuarios-auth/node_modules/jest-circus/build/run.js:155:3)
    at _runTestsForDescribeBlock (/Users/usuario/Documents/Coordinadora/examen Senior/cm-usuarios-auth/node_modules/jest-circus/build/run.js:66:9)
    at _runTestsForDescribeBlock (/Users/usuario/Documents/Coordinadora/examen Senior/cm-usuarios-auth/node_modules/jest-circus/build/run.js:60:9)</failure>
    </testcase>
    <testcase classname="ClienteTokenRouter validarToken debería manejar error al validar un token" name="ClienteTokenRouter validarToken debería manejar error al validar un token" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;authorization&apos;)
    at ClienteTokenRouter.validarToken (/Users/usuario/Documents/Coordinadora/examen Senior/cm-usuarios-auth/src/modules/ClienteToken/controllers/ClienteTokenRouter.ts:50:31)
    at Object.&lt;anonymous&gt; (/Users/usuario/Documents/Coordinadora/examen Senior/cm-usuarios-auth/test/modules/ClienteToken/controllers/ClienteTokenRouter.test.ts:124:38)
    at Promise.then.completed (/Users/usuario/Documents/Coordinadora/examen Senior/cm-usuarios-auth/node_modules/jest-circus/build/utils.js:391:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/usuario/Documents/Coordinadora/examen Senior/cm-usuarios-auth/node_modules/jest-circus/build/utils.js:316:10)
    at _callCircusTest (/Users/usuario/Documents/Coordinadora/examen Senior/cm-usuarios-auth/node_modules/jest-circus/build/run.js:218:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/Users/usuario/Documents/Coordinadora/examen Senior/cm-usuarios-auth/node_modules/jest-circus/build/run.js:155:3)
    at _runTestsForDescribeBlock (/Users/usuario/Documents/Coordinadora/examen Senior/cm-usuarios-auth/node_modules/jest-circus/build/run.js:66:9)
    at _runTestsForDescribeBlock (/Users/usuario/Documents/Coordinadora/examen Senior/cm-usuarios-auth/node_modules/jest-circus/build/run.js:60:9)</failure>
    </testcase>
    <testcase classname="ClienteTokenRouter eliminarRedis debería eliminar datos de Redis correctamente" name="ClienteTokenRouter eliminarRedis debería eliminar datos de Redis correctamente" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Tests del Archivo HealtCheckModules" errors="0" failures="0" skipped="0" timestamp="2025-03-26T22:06:55" time="0.813" tests="3">
    <testcase classname="Tests del Archivo HealtCheckModules debería estar definido" name="Tests del Archivo HealtCheckModules debería estar definido" time="0.001">
    </testcase>
    <testcase classname="Tests del Archivo HealtCheckModules debería tener una ruta" name="Tests del Archivo HealtCheckModules debería tener una ruta" time="0">
    </testcase>
    <testcase classname="Tests del Archivo HealtCheckModules debería tener una ruta" name="Tests del Archivo HealtCheckModules debería tener una ruta" time="0.001">
    </testcase>
  </testsuite>
</testsuites>